![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/122800/789913d3-5387-4d38-ae4f-36ef17474c9a.png)

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/122800/d450b711-409f-411a-bff0-13231b89d7dc.png)

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/122800/f838ce98-1bf8-4103-8f76-ccac69e4676a.png)

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/122800/13f6cf16-c676-476a-aa43-4cb204bf08f9.png)

AIに解説を依頼・生成させた結果ですが、とても分かりやすかったので残しておきます。
（ある意味転記？）

## はじめに

RAID構成は、データの冗長性とパフォーマンスを向上させるストレージ技術です。本記事では、よく比較される3つのRAID構成（RAID 0+1、RAID 1+0、RAID 5）について、それぞれの特徴と違いを詳しく解説します。

---

## RAID 0+1 (RAID 01) - ストライプのミラー

### 構成方法

RAID 0+1は以下の手順で構成されます：

1. **ステップ1**: まずRAID 0（ストライプ）を作る
   ```
   [A1] [A2] [A3] [A4]
   ↑ RAID 0 グループA（高速化）
   ```

2. **ステップ2**: RAID 0グループ全体をミラーリング
   ```
   [A1][A2][A3][A4] ⟷ [B1][B2][B3][B4]
   RAID 0 グループA    RAID 0 グループB
   ```

### 容量と必要台数

- **使用可能容量**: 4台中50%（4TB → 2TB）
- **最低必要台数**: 4台（偶数台必須）

### 障害時の動作

```
[A1故障][A2][A3][A4] ⟷ [B1][B2][B3][B4]
グループA（A1故障→全体停止）  グループB（正常動作）
```

**問題点**: 1つのグループ内で1台でも故障すると、そのグループ全体が停止してしまいます。

---

## RAID 1+0 (RAID 10) - ミラーのストライプ

### 構成方法

RAID 1+0は以下の手順で構成されます：

1. **ステップ1**: まずRAID 1（ミラー）ペアを作る
   ```
   [A1][A2]     [B1][B2]
   ミラーペア1   ミラーペア2
   ```

2. **ステップ2**: ミラーペア間でストライプ化
   ```
   [A1][A2] ⟷ [B1][B2]
   ミラーペア1  ミラーペア2
   ```

### 容量と必要台数

- **使用可能容量**: 4台中50%（4TB → 2TB）
- **最低必要台数**: 4台（偶数台必須）

### 障害時の動作

```
[A1故障][A2] ⟷ [B1][B2]
ペア1（A1故障→A2で継続）  ペア2（正常動作）
```

**利点**: 各ミラーペアが独立しているため、1つのペア内で1台故障してもサービス継続可能。

---

## RAID 5 - パリティによる冗長化

### 構成方法

RAID 5は、データとパリティを分散して配置します：

```
凡例: D=データブロック、P=パリティブロック

[D1] [D3] [P2]
[D2] [P1] [D4] 
[P3] [D5] [D6]
```

### パリティの仕組み

- **パリティ計算**: パリティ = データ1 ⊕ データ2（XOR演算）
- **復元原理**: どれか1つが失われても、残り2つから復元可能

### 容量と必要台数

- **使用可能容量**: 3台中67%（3TB → 2TB）
- **容量効率**: (n-1)/n（nはディスク数）
- **最低必要台数**: 3台（3台以上）

### 障害時の動作

1. **1台故障時**:
   ```
   [D1] [故障] [P2]
   [D2] [---] [D4] 
   [P3] [---] [D6]
   ↓
   パリティから復元可能
   ```

2. **復旧プロセス**:
   ```
   [D1] [復旧中] [P2]
   [D2] [計算中] [D4] 
   [P3] [再構築] [D6]
   ↓
   パリティ計算により失われたデータを復元
   ```

---

## 総合比較表

| 項目 | RAID 0+1 | RAID 1+0 | RAID 5 |
|------|-----------|-----------|---------|
| **構成方法** | ストライプ→ミラー | ミラー→ストライプ | データ+パリティ分散 |
| **最少ディスク数** | 4台 | 4台 | 3台 ✅ |
| **容量効率** | 50% ❌ | 50% ❌ | 67%～ ✅ |
| **読み取り性能** | 高速 ✅ | 高速 ✅ | 高速 ✅ |
| **書き込み性能** | 高速 ✅ | 高速 ✅ | 低速 ❌ |
| **耐障害性** | やや弱い ❌ | 強い ✅ | 普通 |
| **復旧時間** | 長い ❌ | 短い ✅ | 長い ❌ |
| **コスト** | 高い ❌ | 高い ❌ | 低い ✅ |
| **用途・推奨度** | 非推奨 ❌ | 推奨 ✅ | 一般的 |

## 選択の指針

### 🔴 RAID 0+1
- **特徴**: レガシー構成
- **推奨度**: 現在は非推奨
- **理由**: RAID 1+0の劣化版のため

### 🔵 RAID 1+0
- **特徴**: 高性能・高信頼性
- **推奨度**: 性能重視の場合に推奨
- **適用場面**: 
  - データベースサーバー
  - 高トランザクション環境
  - ミッションクリティカルなシステム

### 🟢 RAID 5
- **特徴**: バランス型
- **推奨度**: コスト重視の場合に推奨
- **適用場面**:
  - ファイルサーバー
  - バックアップストレージ
  - 読み取り中心のワークロード

## まとめ

RAIDの選択は、要件に応じて以下のように使い分けることが重要です：

- **性能重視** → **RAID 1+0**（高価だが高性能・高信頼性）
- **コスト重視** → **RAID 5**（容量効率が良い、書き込みやや遅い）
- **RAID 0+1** → 現在は使用されない（RAID 1+0の劣化版）

特に、RAID 0+1とRAID 1+0は容量効率は同じですが、障害時の挙動が大きく異なります。RAID 1+0の方が耐障害性に優れているため、現在はRAID 1+0が推奨されています。

## 参考資料

- [RAID - Wikipedia](https://ja.wikipedia.org/wiki/RAID)
- 各ストレージベンダーの技術資料

---

*この記事がRAID構成の理解に役立てば幸いです。質問やコメントがあれば、お気軽にお声かけください。*
